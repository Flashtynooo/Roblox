local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local lp = Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")
local hrp = char:WaitForChild("HumanoidRootPart")

local gui, frame, hubImage
local isHubVisible = true
local contentElements = {}
local buttonFrame
local isFlying = false
local isFrozen = false
local speedLabel

local flyConn
local bodyGyro, bodyVelocity

local function toggleFly()
    if not isFlying then
        bodyGyro = Instance.new("BodyGyro", hrp)
        bodyGyro.P = 9e4
        bodyGyro.maxTorque = Vector3.new(9e9, 9e9, 9e9)
        bodyGyro.cframe = hrp.CFrame

        bodyVelocity = Instance.new("BodyVelocity", hrp)
        bodyVelocity.velocity = Vector3.new(0, 0, 0)
        bodyVelocity.maxForce = Vector3.new(9e9, 9e9, 9e9)

        flyConn = RunService.RenderStepped:Connect(function()
            bodyGyro.CFrame = workspace.CurrentCamera.CFrame
            bodyVelocity.velocity = workspace.CurrentCamera.CFrame.LookVector * hum.WalkSpeed
        end)

        isFlying = true
    else
        if flyConn then flyConn:Disconnect() end
        if bodyGyro then bodyGyro:Destroy() end
        if bodyVelocity then bodyVelocity:Destroy() end
        isFlying = false
    end
end

local function createHub()
    gui = Instance.new("ScreenGui", game.CoreGui)
    gui.Name = "FlashtynoooHub"

    frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0, 280, 0, 280)
    frame.Position = UDim2.new(0.05, 0, 0.1, 0)
    frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
    frame.BorderSizePixel = 10
    frame.BorderColor3 = Color3.fromRGB(255, 0, 0)
    frame.Active = true
    frame.Draggable = true
    table.insert(contentElements, frame)

    local title = Instance.new("TextLabel", frame)
    title.Size = UDim2.new(1, 0, 0, 35)
    title.Text = "Flashtynooo Hub 1.06"
    title.BackgroundTransparency = 1
    title.TextColor3 = Color3.new(1,1,1)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 20
    table.insert(contentElements, title)

    hubImage = Instance.new("ImageButton", gui)
    hubImage.Size = UDim2.new(0, 40, 0, 40)
    hubImage.Position = UDim2.new(0.05, 0, 0.2, 0)
    hubImage.Image = "rbxassetid://80777483293351"
    hubImage.Visible = true
    hubImage.Active = true
    hubImage.Draggable = true

    hubImage.MouseButton1Click:Connect(function()
        isHubVisible = not isHubVisible
        for _, el in ipairs(contentElements) do
            el.Visible = isHubVisible
        end
    end)

    buttonFrame = Instance.new("ScrollingFrame", frame)
    buttonFrame.Size = UDim2.new(1, 0, 0, 160)
    buttonFrame.Position = UDim2.new(0, 0, 0, 35)
    buttonFrame.BackgroundTransparency = 1
    buttonFrame.CanvasSize = UDim2.new(0, 0, 0, 1000)
    buttonFrame.ScrollBarThickness = 10
    buttonFrame.ClipsDescendants = true
    table.insert(contentElements, buttonFrame)

    local uiListLayout = Instance.new("UIListLayout", buttonFrame)
    uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    uiListLayout.Padding = UDim.new(0, 5)
    uiListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

    local function createButton(txt, y, callback)
        local b = Instance.new("TextButton", buttonFrame)
        b.Size = UDim2.new(0.9, 0, 0, 35)
        b.Position = UDim2.new(0.05, 0, 0, y)
        b.Text = txt
        b.BackgroundColor3 = Color3.fromRGB(60,60,60)
        b.TextColor3 = Color3.new(1,1,1)
        b.Font = Enum.Font.Gotham
        b.TextSize = 16
        b.MouseButton1Click:Connect(callback)
        table.insert(contentElements, b)
        return b
    end

    local function createSpeedButton(y)
        local speedButton = Instance.new("Frame", buttonFrame)
        speedButton.Size = UDim2.new(0.9, 0, 0, 35)
        speedButton.Position = UDim2.new(0.05, 0, 0, y)
        speedButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)

        local minusButton = Instance.new("TextButton", speedButton)
        minusButton.Size = UDim2.new(0.33, 0, 1, 0)
        minusButton.Position = UDim2.new(0, 0, 0, 0)
        minusButton.Text = "-"
        minusButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        minusButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        minusButton.Font = Enum.Font.Gotham
        minusButton.TextSize = 16
        minusButton.MouseButton1Click:Connect(function()
            hum.WalkSpeed = math.max(4, hum.WalkSpeed - 4)
        end)

        local resetButton = Instance.new("TextButton", speedButton)
        resetButton.Size = UDim2.new(0.33, 0, 1, 0)
        resetButton.Position = UDim2.new(0.33, 0, 0, 0)
        resetButton.Text = "Reset"
        resetButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        resetButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        resetButton.Font = Enum.Font.Gotham
        resetButton.TextSize = 16
        resetButton.MouseButton1Click:Connect(function()
            hum.WalkSpeed = 16
        end)

        local plusButton = Instance.new("TextButton", speedButton)
        plusButton.Size = UDim2.new(0.33, 0, 1, 0)
        plusButton.Position = UDim2.new(0.66, 0, 0, 0)
        plusButton.Text = "+"
        plusButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        plusButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        plusButton.Font = Enum.Font.Gotham
        plusButton.TextSize = 16
        plusButton.MouseButton1Click:Connect(function()
            hum.WalkSpeed = hum.WalkSpeed + 4
        end)

        table.insert(contentElements, speedButton)
        return speedButton
    end

    speedLabel = Instance.new("TextLabel", frame)
    speedLabel.Size = UDim2.new(1, 0, 0, 30)
    speedLabel.Position = UDim2.new(0, 0, 1, -35)
    speedLabel.BackgroundTransparency = 1
    speedLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    speedLabel.Text = "Speed: " .. hum.WalkSpeed
    speedLabel.Font = Enum.Font.Gotham
    speedLabel.TextSize = 18
    speedLabel.TextStrokeTransparency = 0.8
    speedLabel.TextXAlignment = Enum.TextXAlignment.Center
    table.insert(contentElements, speedLabel)

    local function updateSpeedDisplay()
        local speed = hum.WalkSpeed
        speedLabel.Text = "Speed: " .. speed
        local maxSpeed = 100
        local minSpeed = 16
        local red = math.clamp((speed - minSpeed) / (maxSpeed - minSpeed), 0, 1)
        local green = 1 - red
        speedLabel.TextColor3 = Color3.fromRGB(red * 255, green * 255, 0)
    end

    hum:GetPropertyChangedSignal("WalkSpeed"):Connect(updateSpeedDisplay)

    createSpeedButton(70)

    createButton("Freeze (FE)", 140, function()
        isFrozen = not isFrozen
        if isFrozen then
            hum.PlatformStand = true
            char:WaitForChild("HumanoidRootPart").Anchored = true
            if not isFlying then
                toggleFly()
            end
        else
            hum.PlatformStand = false
            char:WaitForChild("HumanoidRootPart").Anchored = false
            if isFlying then
                toggleFly()
            end
        end
    end)

    local espEnabled = false
    local espConnections = {}

    local function createESP(player)
        if player == lp then return end
        local function setup()
            local char = player.Character
            if char and not char:FindFirstChild("FlashtyESP") then
                local hrp = char:FindFirstChild("HumanoidRootPart")
                if hrp then
                    local esp = Instance.new("Highlight")
                    esp.Name = "FlashtyESP"
                    esp.Parent = char
                    esp.FillTransparency = 0.8
                    esp.OutlineTransparency = 0.1
                    esp.FillColor = player.TeamColor.Color
                    esp.OutlineColor = player.TeamColor.Color

                    local gui = Instance.new("BillboardGui", char)
                    gui.Name = "ESPName"
                    gui.Size = UDim2.new(0, 200, 0, 30)
                    gui.StudsOffset = Vector3.new(0, 3, 0)
                    gui.AlwaysOnTop = true

                    local text = Instance.new("TextLabel", gui)
                    text.Size = UDim2.new(1, 0, 1, 0)
                    text.BackgroundTransparency = 1
                    text.TextColor3 = player.TeamColor.Color
                    text.TextStrokeTransparency = 0.7
                    text.Font = Enum.Font.Gotham
                    text.TextSize = 14
                    text.Text = player.DisplayName .. " @" .. player.Name
                end
            end
        end

        local charConn = player.CharacterAdded:Connect(function()
            if espEnabled then
                task.wait(1)
                setup()
            end
        end)
        table.insert(espConnections, charConn)

        if player.Character then
            setup()
        end
    end

    local function removeESP(player)
        if player.Character then
            local c = player.Character
            local e = c:FindFirstChild("FlashtyESP")
            if e then e:Destroy() end
            local n = c:FindFirstChild("ESPName")
            if n then n:Destroy() end
        end
    end

    local function clearAllESP()
        for _, p in pairs(Players:GetPlayers()) do
            removeESP(p)
        end
    end

    local function toggleESP()
        espEnabled = not espEnabled

        if espEnabled then
            for _, p in ipairs(Players:GetPlayers()) do
                createESP(p)
            end

            local joinConn = Players.PlayerAdded:Connect(function(p)
                if espEnabled then createESP(p) end
            end)
            table.insert(espConnections, joinConn)

            local leaveConn = Players.PlayerRemoving:Connect(function(p)
                removeESP(p)
            end)
            table.insert(espConnections, leaveConn)
        else
            clearAllESP()
            for _, conn in pairs(espConnections) do
                conn:Disconnect()
            end
            espConnections = {}
        end
    end

    createButton("ESP", 190, toggleESP)

    createButton("Animation (NO WORK)", 240, function()
        local animationScript = "loadstring(game:HttpGet('https://raw.githubusercontent.com/Flashtynooo/Roblox/refs/heads/Flashtynooo-hub/Fly%20for%20hub'))()"  -- Replace with actual URL
        loadstring(animationScript)()
    end)

    -- BOUTON BROOKHAVEN (ajout demandé)
    createButton("Brookhaven", 290, function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Flashtynooo/Roblox/refs/heads/Flashtynooo-hub/Brookhaven"))()
    end)

createButton("Line to CHICKEN JOCKEY!", 290, function()
        -- Vérifie si l'ID du jeu actuel correspond à 108049414495683

    -- Exécute le loadstring depuis GitHub
   if game.PlaceId == 108049414495683 then loadstring(game:HttpGet("https://raw.githubusercontent.com/Flashtynooo/Roblox/refs/heads/Flashtynooo-hub/Line%20to%20CHICKEN%20JOCKEY!"))()
end

    end)
end

createHub()
