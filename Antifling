local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

-- On récupère le Tool fling (celui que tu as créé)
local function getFlingTool()
    local pack = LocalPlayer:FindFirstChild("Backpack")
    if pack then
        return pack:FindFirstChild("Fe floating true-flshty (R6)")
    end
    local char = LocalPlayer.Character
    if char then
        return char:FindFirstChild("Fe floating true-flshty (R6)")
    end
    return nil
end

local function AntiFling()
    local flingTool = getFlingTool()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            for _, part in pairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    -- Ignore la vélocité du tool fling (ne pas bloquer)
                    if flingTool and (part:IsDescendantOf(flingTool) or part == flingTool) then
                        -- Ignore les parties du Tool fling
                    else
                        -- Désactiver les collisions et vélocités sur les autres joueurs
                        part.CanCollide = false
                        part.Velocity = Vector3.zero
                        part.RotVelocity = Vector3.zero
                        part.AssemblyLinearVelocity = Vector3.zero
                        part.AssemblyAngularVelocity = Vector3.zero
                        part.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0)
                    end
                end
            end
        end
    end
end

local function AutoAnchor()
    if Character and Character:FindFirstChild("HumanoidRootPart") then
        local hrp = Character.HumanoidRootPart
        if hrp.Velocity.Magnitude > 100 then
            hrp.Velocity = Vector3.zero
            hrp.RotVelocity = Vector3.zero
            hrp.CFrame = CFrame.new(0, 10, 0)
        end
    end
end

RunService.Heartbeat:Connect(function()
    pcall(AntiFling)
    pcall(AutoAnchor)
end)

LocalPlayer.CharacterAdded:Connect(function(char)
    Character = char
end)

print("✅ Anti-Fling ACTIVÉ et compatible avec ton outil fling.")
