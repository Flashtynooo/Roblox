local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Nettoyage (vêtements, accessoires, face)
for _, obj in pairs(character:GetChildren()) do
    if obj:IsA("Accessory") or obj:IsA("Shirt") or obj:IsA("Pants") or obj:IsA("ShirtGraphic") or obj:IsA("CharacterMesh") then
        obj:Destroy()
    end
end
local head = character:FindFirstChild("Head") or character:FindFirstChild("Tête")
if head then
    for _, decal in pairs(head:GetChildren()) do
        if decal:IsA("Decal") then
            decal:Destroy()
        end
    end
end

-- Couleur noire sur corps
local bodyParts = {
    "Head", "Torso", "Left Arm", "Right Arm", "Left Leg", "Right Leg",
    "UpperTorso", "LowerTorso",
    "LeftUpperArm", "RightUpperArm", "LeftLowerArm", "RightLowerArm", "LeftHand", "RightHand",
    "LeftUpperLeg", "RightUpperLeg", "LeftLowerLeg", "RightLowerLeg", "LeftFoot", "RightFoot",
}
for _, part in pairs(character:GetChildren()) do
    if part:IsA("BasePart") and table.find(bodyParts, part.Name) then
        part.BrickColor = BrickColor.new("Really black")
        part.Material = Enum.Material.SmoothPlastic
        for _, child in pairs(part:GetChildren()) do
            if child:IsA("Decal") or child:IsA("Texture") then
                child:Destroy()
            end
        end
    end
end

-- Invisibiliser l'original
for _, part in pairs(character:GetChildren()) do
    if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
        part.Transparency = 1
        part.CanCollide = false
    end
end

-- Fonction copie d'une part
local function creerPartCopie(partOriginal)
    local p = Instance.new("Part")
    p.Name = partOriginal.Name
    p.Size = partOriginal.Size
    p.CFrame = partOriginal.CFrame
    p.Anchored = true
    p.CanCollide = false
    p.Material = partOriginal.Material
    p.Color = partOriginal.Color
    p.Transparency = 0
    p.CastShadow = false
    p.TopSurface = partOriginal.TopSurface
    p.BottomSurface = partOriginal.BottomSurface
    -- Copier les meshes (si présents)
    for _, child in pairs(partOriginal:GetChildren()) do
        if child:IsA("SpecialMesh") then
            child:Clone().Parent = p
        end
    end
    return p
end

-- Création copie model
local copieModel = Instance.new("Model", workspace)
copieModel.Name = "Flshty_test_CopieParts"
local copiePartsTable = {}
for _, part in pairs(character:GetChildren()) do
    if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
        local copie = creerPartCopie(part)
        copie.Parent = copieModel
        copiePartsTable[part.Name] = copie
    end
end

-- Noclip sur toutes les copies
game:GetService("RunService").Stepped:Connect(function()
    for _, part in pairs(copieModel:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = false
        end
    end
end)

-- Suivi des parties sauf en animation
local RunService = game:GetService("RunService")
local function suivre()
    RunService.RenderStepped:Connect(function()
        if _G.AnimationModule and _G.AnimationModule.IsPlaying and _G.AnimationModule.IsPlaying() then return end
        for name, copy in pairs(copiePartsTable) do
            local original = character:FindFirstChild(name)
            if original and original:IsA("BasePart") then
                copy.CFrame = original.CFrame
            end
        end
    end)
end
suivre()

-- Blocage déplacement si animation
RunService.Heartbeat:Connect(function()
    if _G.AnimationModule and _G.AnimationModule.IsPlaying and _G.AnimationModule.IsPlaying() then
        humanoid.WalkSpeed = 0
        humanoid.JumpPower = 0
    else
        humanoid.WalkSpeed = 16
        humanoid.JumpPower = 50
    end
end)

-- Déco visuelle (facultatif)
local headCopy = copieModel:FindFirstChild("Head")
if headCopy then
    local decal = Instance.new("Decal")
    decal.Texture = "rbxassetid://179693472"
    decal.Face = Enum.NormalId.Front
    decal.Parent = headCopy
end

-- Chargement de protection anti-fling
loadstring(game:HttpGet("https://raw.githubusercontent.com/Flashtynooo/Roblox/refs/heads/Fighting-style/Antifling"))()
